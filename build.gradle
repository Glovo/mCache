buildscript {
    ext.kotlin_version = '1.1.2-4'
    ext.artifactory_user = System.getenv('BIN_USER')
    ext.artifactory_password = System.getenv('API_KEY')
    ext.artifactory_contextUrl = "https://oss.jfrog.org/artifactory"

    repositories {
        jcenter()
        maven {
            url 'https://oss.jfrog.org/artifactory/plugins-release'
            credentials {
                username = artifactory_user
                password = artifactory_password
            }
        }
    }
    dependencies {
        classpath 'com.android.tools.build:gradle:2.3.2'
        classpath 'me.tatarka:gradle-retrolambda:3.6.0'
        classpath 'com.jfrog.bintray.gradle:gradle-bintray-plugin:1.7.3'
        classpath 'com.github.dcendents:android-maven-gradle-plugin:1.5'
        classpath "org.jfrog.buildinfo:build-info-extractor-gradle:4.4.18"
        classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version"
    }
}

ext {
    vName = '1.0.0-SNAPSHOT'
    vCode = 1000
    vSDK = 25
    vMinSDK = 9
    vBuildTools = "25.0.3"
}

allprojects {
    apply plugin: "com.jfrog.artifactory"
    tasks.withType(Javadoc) {
        options.addBooleanOption('Xdoclint:none', true)
    }
    repositories {
        jcenter()
    }
}

task clean(type: Delete) {
    delete rootProject.buildDir
}

artifactory {
    contextUrl = "${artifactory_contextUrl}"
    publish {
        repository {
            repoKey = 'oss-snapshot-local'
            username = artifactory_user
            password = artifactory_password
            maven = true
        }
    }
    resolve {
        repository {
            repoKey = 'libs-snapshot'
            username = artifactory_user
            password = artifactory_password
            maven = true
        }
    }
}